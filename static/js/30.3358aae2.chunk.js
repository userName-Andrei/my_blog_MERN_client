"use strict";(self.webpackChunkmy_blog_mern_client=self.webpackChunkmy_blog_mern_client||[]).push([[30],{4982:function(t,e,n){n.d(e,{Z:function(){return v}});var r=n(3433),s=n(890),i=n(493),o=n(4721),a=n(2791),c=n(4852),l=n(653),d=n(7047),u=n(9900),h=n(6272),x=n(184),m=function(){return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(c.ZP,{alignItems:"flex-start",children:[(0,x.jsx)(l.Z,{children:(0,x.jsx)(d.Z,{variant:"circular",width:40,height:40})}),(0,x.jsx)(u.Z,{primary:(0,x.jsx)(d.Z,{width:"40%",height:15}),secondary:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(d.Z,{width:"20%",height:10,style:{marginBottom:6}}),(0,x.jsx)(d.Z,{width:"100%",height:10}),(0,x.jsx)(d.Z,{width:"100%",height:10}),(0,x.jsx)(d.Z,{width:"80%",height:10})]})})]})})},j=function(t){var e=t.text,n=t.author,r=t.date;return t.isLoading?(0,x.jsx)(m,{}):(0,x.jsx)(h.Z,{user:n,postDate:r,children:e})},g=n(3975),Z=function(t){var e=t.comments,n=t.isLoading;return e.message?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.Z,{variant:"h5",gutterBottom:!0,children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438:"}),(0,x.jsx)(s.Z,{variant:"body1",ml:2,mb:2,children:e.message})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.Z,{variant:"h5",gutterBottom:!0,children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438:"}),(0,x.jsx)(i.Z,{children:(n?(0,r.Z)(Array(5)):e).map((function(t,e,r){return n?(0,x.jsx)(j,{isLoading:!0},e):(0,x.jsxs)("div",{children:[(0,x.jsx)(j,{text:t.text,author:t.author,date:(0,g.Z)(t.createdAt)}),r[e+1]&&(0,x.jsx)(o.Z,{variant:"inset",component:"li"})]},e)}))})]})},v=(0,a.memo)(Z)},6617:function(t,e,n){n.d(e,{Z:function(){return P}});var r=n(4165),s=n(5861),i=n(2791),o=n(3504),a=n(9434),c=n(9731),l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return t.length>e?(t=t.slice(0,e).split(" ")).slice(0,t.length-1).join(" ")+"...":t},d=n(3123),u=n(8683),h=n(6272),x=n(7621),m=n(9585),j=n(7047),g=n(9504),Z="Post_root__V46Gj",v="Post_editButtons__xNNC5",p="Post_skeleton__BhgkI",f=n(184),w=function(){return(0,f.jsxs)(x.Z,{className:p,variant:"outlined",children:[(0,f.jsx)(m.Z,{avatar:(0,f.jsx)(j.Z,{variant:"circular",width:40,height:40}),title:(0,f.jsx)(j.Z,{height:10,width:"80%",style:{marginBottom:6}}),subheader:(0,f.jsx)(j.Z,{height:10,width:"40%"})}),(0,f.jsx)(j.Z,{width:"100%",height:200,variant:"rectangular"}),(0,f.jsxs)(g.Z,{children:[(0,f.jsx)(j.Z,{height:10,style:{marginBottom:6}}),(0,f.jsx)(j.Z,{height:10,style:{marginBottom:6}}),(0,f.jsx)(j.Z,{height:10,width:"80%"})]})]})},b=n(3967),y=n(4554),_=n(3400),I=n(3767),k=n(890),B=n(2169),F=n(3746),U=n(9161),C=n(1286),D=n(7247),P=function(t){var e=t.id,n=t.user,m=t.image,j=t.postDate,p=t.title,P=t.text,L=t.tags,M=t.views,N=t.comments,A=t.isLoading,S=t.isEditable,R=t.isFullPost,q=(0,b.Z)(),z=(0,a.I0)(),E=(0,i.useMemo)((function(){return l(P,100)}),[P]),G=function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.Z.delete("/posts/".concat(e));case 3:z((0,d.M8)(e)),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.warn("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u044c\u044e!",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}();return A?(0,f.jsx)(w,{}):(0,f.jsxs)(x.Z,{variant:"outlined",className:R?null:Z,sx:R&&{border:"none"},children:[S?(0,f.jsxs)(y.Z,{className:v,children:[(0,f.jsx)(_.Z,{color:"primary",children:(0,f.jsx)(o.rU,{to:"/posts/".concat(e,"/edit"),children:(0,f.jsx)(C.Z,{})})}),(0,f.jsx)(_.Z,{color:"secondary",onClick:function(){return G(e)},children:(0,f.jsx)(D.Z,{})})]}):null,(0,f.jsx)(h.Z,{user:n,postDate:j}),(0,f.jsxs)(I.Z,{direction:"row",sx:{position:"relative",height:R?"40vh":"200px",alignItems:"flex-end"},children:[(0,f.jsx)(k.Z,{variant:"h4",color:q.palette.common.white,sx:{position:"relative",zIndex:5,ml:2,mb:1},children:R?p:(0,f.jsx)(o.rU,{to:"/posts/".concat(e),children:p})}),(0,f.jsx)(B.Z,{image:m,component:"img",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}),(0,f.jsx)(y.Z,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.3)"}})]}),(0,f.jsxs)(g.Z,{children:[(0,f.jsx)(k.Z,{mb:1,children:R?(0,f.jsx)(u.D,{children:P}):(0,f.jsx)(o.rU,{to:"/posts/".concat(e),children:(0,f.jsx)(u.D,{children:E})})}),(0,f.jsx)(I.Z,{direction:"row",spacing:1,children:L.map((function(t,e){return(0,f.jsx)(k.Z,{variant:"overline",mb:1,color:"secondary",children:(0,f.jsxs)(o.rU,{to:"/posts/tags/".concat(t),children:["#",t]})},e)}))}),(0,f.jsxs)(I.Z,{direction:"row",children:[(0,f.jsxs)(I.Z,{direction:"row",alignItems:"center",mr:2,children:[(0,f.jsx)(F.Z,{sx:{mr:1},color:"secondary"}),(0,f.jsx)(k.Z,{variant:"subtitle",color:"secondary",children:M})]}),(0,f.jsxs)(I.Z,{direction:"row",alignItems:"center",children:[(0,f.jsx)(U.Z,{sx:{mr:1},color:"secondary"}),(0,f.jsx)(k.Z,{variant:"subtitle",color:"secondary",children:N||0})]})]})]})]})}},6272:function(t,e,n){var r=n(493),s=n(4852),i=n(653),o=n(3044),a=n(9900),c=n(4554),l=n(890),d=(n(2791),n(184));e.Z=function(t){var e=t.user,n=t.postDate,u=t.children;return(0,d.jsx)(r.Z,{sx:{width:"100%",bgcolor:"background.paper"},disablePadding:!0,children:(0,d.jsxs)(s.ZP,{alignItems:"flex-start",children:[(0,d.jsx)(i.Z,{children:(0,d.jsx)(o.Z,{alt:e.name,src:e.avatarUrl})}),(0,d.jsx)(a.Z,{primary:e.name,secondary:(0,d.jsxs)(d.Fragment,{children:[n,u&&(0,d.jsx)(c.Z,{mt:1,overflow:"hidden",children:(0,d.jsx)(l.Z,{variant:"body2",color:"text.primary",component:"p",children:u})})]})})]})})}},8030:function(t,e,n){n.r(e),n.d(e,{default:function(){return _}});var r=n(890),s=n(3767),i=n(2791),o=n(6871),a=n(1413),c=n(9195),l=n(4695),d=n(2797),u=n(9434),h=n(3123),x=n(3044),m=n(4554),j=n(7665),g=n(6151),Z=n(1686),v=n(184),p=function(t){var e,n,r,i=t.user,p=(0,u.I0)(),f=(0,u.v9)((function(t){return t.posts.newComment.status})),w=(0,o.UO)().id,b=d.Ry({text:d.Z_().trim().ensure().required("\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c")}).required(),y=(0,c.cI)({resolver:(0,l.X)(b),mode:"onChange"}),_=y.register,I=y.reset,k=y.handleSubmit,B=y.formState.errors;return(0,v.jsxs)(s.Z,{direction:"row",width:"100%",pl:2,children:[(0,v.jsx)(x.Z,{src:i.avatarUrl||null,sx:{mr:2}}),(0,v.jsx)(m.Z,{flexGrow:1,children:(0,v.jsxs)("form",{onSubmit:k((function(t){p((0,h.Yr)({postId:w,comment:t,author:i})),I()})),children:[(0,v.jsx)(j.Z,(0,a.Z)((0,a.Z)({},_("text")),{},{label:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",variant:"outlined",minRows:3,maxRows:8,type:"text",color:Boolean(null===(e=B.text)||void 0===e?void 0:e.message)?"error":"secondary",error:Boolean(null===(n=B.text)||void 0===n?void 0:n.message),helperText:null===(r=B.text)||void 0===r?void 0:r.message,multiline:!0,fullWidth:!0,sx:{mb:2}})),(0,v.jsx)(g.Z,{variant:"contained",color:"secondary",type:"submit",endIcon:(0,v.jsx)(Z.Z,{}),disabled:"loading"===f,children:"loading"===f?"\u0417\u0432\u0433\u0440\u0443\u0437\u043a\u0430...":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})})]})},f=n(4982),w=n(6617),b=n(3975),y=n(7871),_=function(){var t=(0,u.I0)(),e=(0,u.v9)((function(t){return t.posts.posts.items[0]})),n=(0,u.v9)((function(t){return{name:t.posts.posts.status,message:t.posts.posts.errorMessage}})),a=(0,u.v9)((function(t){return t.posts.comments})),c=(0,o.UO)().id,l=(0,u.v9)(y.Qk),d=(0,u.v9)((function(t){return t.auth.user}));(0,i.useEffect)((function(){t((0,h.U9)()),t((0,h.vp)(c)),t((0,h.Vo)(c))}),[]);return(0,v.jsxs)(s.Z,{mt:10,mb:4,children:[function(t,e){return"error"===e.name?(0,v.jsx)(r.Z,{variant:"h4",color:"error",textAlign:"center",gutterBottom:!0,children:e.message||"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."}):"loading"===e.name?(0,v.jsx)(w.Z,{isLoading:"loading"===e.name,isFullPost:!0}):(0,v.jsx)(w.Z,{user:t.author,image:t.previewUrl,postDate:(0,b.Z)(t.createdAt),title:t.title,tags:t.tags,text:t.text,views:t.viewsCount,comments:t.commentCount,isFullPost:!0})}(e,n),"error"!==n.name&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(f.Z,{comments:a.items,isLoading:"loading"===a.status}),"error"===a.status&&(0,v.jsx)(r.Z,{variant:"body1",color:"error",ml:2,mb:2,children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"}),l&&(0,v.jsx)(p,{user:d})]})]})}},3975:function(t,e){e.Z=function(t){var e=function(t){return t<10?"0"+t:t},n=new Date("".concat(t)),r={time:"".concat(e(n.getHours()),":").concat(e(n.getMinutes())),date:"".concat(e(n.getDate()),"/").concat(e(n.getMonth()+1),"/").concat(n.getFullYear())};return"".concat(r.date," ").concat(r.time)}},1686:function(t,e,n){var r=n(4836);e.Z=void 0;var s=r(n(5649)),i=n(184),o=(0,s.default)((0,i.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");e.Z=o}}]);
//# sourceMappingURL=30.3358aae2.chunk.js.map